# Ethernet Configuration
To enable Ethernet in our ZedBoard, we must change some default configurations in Yocto meta-xilinx-tool layer.

Specifically, if you check the **zc702.dtsi** file (poky/build/tmp/work/zedboard_zynq7-poky-linux-gnueabi/device-tree/xilinx-v2023
.2+gitAUTOINC+1a5881d004-r0/device-tree-build/device-tree/zc702.dtsi), you will see the following configuration for the ethernet:
```
&gem0 {
        phy-handle = <&ethernet_phy>;
        pinctrl-names = "default";
        pinctrl-0 = <&pinctrl_gem0_default>;
        phy-reset-gpio = <&gpio0 11 0>;
        phy-reset-active-low;

        ethernet_phy: ethernet-phy@7 {
                reg = <7>;
                device_type = "ethernet-phy";
        };
};
```
In this configuration, the PHY address is set to 7 (reg parameter), while in the ZedBoard it must be set to 0.

Also in **pcw.dtsi** file (poky/build/tmp/work/zedboard_zynq7-poky-linux-gnueabi/device-tree/xilinx-v2023
.2+gitAUTOINC+1a5881d004-r0/device-tree-build/device-tree/pcw.dtsi), the **Write Protection** option must be disabled; otherwise we cannot write to the rootfs files, so the ssh connection from the host to the target hardware will not be possible.

Since this dtsi files are generated by bitbake when reading the recipes, we cannot manually modify the dtsi files (unlike the Buildroot). Therefore, we must modify the recipe which is responsible for generating these dtsi files.
This recipe is located in the **meta-xilinx-tools** layer and its name is **device-tree.bbappend** (poky/meta-xilinx-tools/recipes-bsp/device-tree/device-tree.bbappend).
Add these lines to the device-tree.bbappend recipe to modify the above-mentioned configurations:

```
do_configure:append() {
       sed -i '77,78 s/7/0/' ${B}/device-tree/zc702.dtsi
       sed -i '41 i\\tdisable-wp;' ${B}/device-tree/pcw.dtsi

}
```

The first line replaces the PHY address of ethernet in lines 77 and 78 in the zc702.dtsi file from 7 to 0.
The second line adds "disable-wp;" line after the line 41 to the pcw.dtsi file.

Finally, to be able to use ssh connection, you must istall the following IMAGE in custom-image.bb:

``IMAGE_INSTALL += openssh``
